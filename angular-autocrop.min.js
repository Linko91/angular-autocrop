/*!
 _        _         _            
| \      (_)       | |           
| |       _  ____  | |  _   ___  
| |      | ||  _ \ | |_/ ) / _ \ 
| |_____ | || | | ||  _ ( | (_) |
\_______)|_||_| |_||_| \_) \___/ 
                                      

 * angular-autocrop v0.1.0
 * Angular auto crop image 
 *
 * http://ddmweb.it/
 * Licensed under the MIT license
 *
 * @author Davide Di Modica
 * @requires angular
 
*/


angular.module("autocrop",[]).constant("MODULE_VERSION","0.1.0").controller("$autoCropImage",function(){function t(){e(a,this,0,0,a.width,a.height)}function e(t,e,n,a,h,i,o,d){2===arguments.length&&(n=a=0,h=t.width,i=t.height),o=o?o:.5,d=d?d:.5,0>o&&(o=0),0>d&&(d=0),o>1&&(o=1),d>1&&(d=1);var r,c,g,u,m=e.width,l=e.height,s=Math.min(h/m,i/l),v=m*s,w=l*s,E=1;h>v&&(E=h/v),i>w&&(E=i/w),v*=E,w*=E,g=m/(v/h),u=l/(w/i),r=(m-g)*o,c=(l-u)*d,0>r&&(r=0),0>c&&(c=0),g>m&&(g=m),u>l&&(u=l);var I=document.createElement("canvas");I.width=t.width,I.height=t.height;var f=I.getContext("2d");f.drawImage(e,r,c,g,u,n,a,h,i);var p=I.toDataURL();t.src=p}var n,a;this.init=function(e,h){n=document.getElementById(e),a=document.getElementById(h),n.onload=t}});