/*!
 _        _         _            
| \      (_)       | |           
| |       _  ____  | |  _   ___  
| |      | ||  _ \ | |_/ ) / _ \ 
| |_____ | || | | ||  _ ( | (_) |
\_______)|_||_| |_||_| \_) \___/ 
                                      

 * angular-autocrop v1.0.0
 * Angular auto crop image 
 *
 * http://ddmweb.it/
 * Licensed under the MIT license
 *
 * @author Davide Di Modica
 * @requires angular
 
*/


!function(){"use strict";var t=angular.module("autocrop",[]).constant("MODULE_VERSION","1.0.0");t.factory("$autoCropImage",function(){function t(t,a,c,g){n=document.getElementById(t),r=document.getElementById(a),c&&parseInt(c)&&!isNaN(parseInt(c))&&(i=c),g&&parseInt(g)&&!isNaN(parseInt(g))&&(o=g),n.onload=e}function e(){var t=r.width,e=r.height;i&&o&&(t=i,e=o),a(r,this,0,0,t,e)}function a(t,e,a,n,r,i,o,c){2===arguments.length&&(a=n=0,r=t.width,i=t.height),o=o?o:.5,c=c?c:.5,0>o&&(o=0),0>c&&(c=0),o>1&&(o=1),c>1&&(c=1);var g=new Image;g.src=e.src;var h,s,u,d,m=g.width,I=g.height,v=Math.min(r/m,i/I),l=m*v,p=I*v,f=1;r>l&&(f=r/l),i>p&&(f=i/p),l*=f,p*=f,u=m/(l/r),d=I/(p/i),h=(m-u)*o,s=(I-d)*c,0>h&&(h=0),0>s&&(s=0),u>m&&(u=m),d>I&&(d=I);var w=document.createElement("canvas");w.width=r,w.height=i;var E=w.getContext("2d");E.drawImage(e,h,s,u,d,a,n,r,i);var N=w.toDataURL("image/jpeg",.8);t.src=N}var n,r,i=0,o=0;return{init:t}})}();